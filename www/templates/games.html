<ion-view title="Hi {{auth.profile.given_name || auth.profile.nickname}}, ready to Play?">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>
  <ion-content class="has-header">
    <div class="card" ng-repeat="game in games | orderBy : '-openedOn'" ng-click="enterGame(game, auth.profile)">
      <div class="item item-text-wrap">
        {{ game | json }}
        {{game.playerOne.nickname}} {{game.playerTwo ? 'VS ' + game.playerTwo.nickname: ' waiting for challenge...'}}
      </div>
      <div class="item item-divider">
        since {{game.openedOn | date:'dd.MM.yy HH:mm'}}
        <span ng-if="canJoin(game, auth.profile)" class="badge badge-assertive">Join battle!</span>
        <span ng-if="isMember(game, auth.profile)" class="badge badge-positive">Reenter</span>
      </div>
    </div>

    <button class="button button-block button-positive" ng-click="startGame()">
      Start new Game
    </button>
  </ion-content>
</ion-view>
